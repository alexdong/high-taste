# Use single dispatch to write generic functions that work across types while keeping the operation's definition in one place.

**ID**: SICP008  
**Category**: Generic Operators (Polymorphism) â†’ boundaries

## Rule Description
Use single dispatch to write generic functions that work across types while keeping the operation's definition in one place.

## Before
```python
def area(shape):
    if isinstance(shape, dict) and shape.get('type') == 'circle':
        return 3.14159 * shape['r'] ** 2
    if isinstance(shape, dict) and shape.get('type') == 'square':
        return shape['side'] ** 2
    raise TypeError("Unknown shape")
```

## After  
```python
from functools import singledispatch

@singledispatch
def area(obj):
    raise TypeError("Unknown shape")

@area.register
def _(obj: tuple):  # circle as ("circle", r)
    _, r = obj
    return 3.14159 * r ** 2

@area.register
def _(obj: dict):  # square as {'side': s}
    return obj['side'] ** 2
```

## Full Example
```python
print(area(("circle", 3)))
print(area({'side': 4}))
```
