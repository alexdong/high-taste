# Use combinators and small interpreters to embed domain‑specific languages instead of entangled configuration code.

**ID**: SICP013  
**Category**: Metalinguistic Abstraction (DSLs) → boundaries

## Rule Description
Use combinators and small interpreters to embed domain‑specific languages instead of entangled configuration code.

## Before
```python
def query(db, table, filters):
    sql = f"SELECT * FROM {table} WHERE "
    clauses = []
    for k, v in filters.items():
        clauses.append(f"{k} = '{v}'")
    sql += ' AND '.join(clauses)
    return db.execute(sql)
```

## After  
```python
from functools import reduce

def eq(field, value):
    return lambda row: row[field] == value

def And(*preds):
    return lambda row: all(p(row) for p in preds)

filters = And(eq('status', 'active'), eq('role', 'admin'))
rows = [r for r in db if filters(r)]
```

## Full Example
```python
# db is list of dict rows
print([r for r in db if filters(r)])
```
