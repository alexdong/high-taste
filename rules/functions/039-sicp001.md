# Abstract common patterns with higher‑order procedures: when several functions share the same traversal logic but differ in the operation applied, define a higher‑order helper that takes the operation as an argument.

**ID**: SICP001  
**Category**: Higher‑Order Functions (Abstraction of Common Patterns) → functions

## Rule Description
Abstract common patterns with higher‑order procedures: when several functions share the same traversal logic but differ in the operation applied, define a higher‑order helper that takes the operation as an argument.

## Before
```python
def sum_of_squares(nums):
    total = 0
    for n in nums:
        total += n * n
    return total


def sum_of_cubes(nums):
    total = 0
    for n in nums:
        total += n ** 3
    return total
```

## After  
```python
from typing import Iterable, Callable

def accumulate(nums: Iterable[int], op: Callable[[int], int]) -> int:
    return sum(op(n) for n in nums)

sum_of_squares = lambda nums: accumulate(nums, lambda n: n * n)
sum_of_cubes   = lambda nums: accumulate(nums, lambda n: n ** 3)
```

## Full Example
```python
nums = list(range(10))
print(sum_of_squares(nums))
print(sum_of_cubes(nums))
```
