# Extract Function: Move a fragment of code into its own function.

**ID**: RF015  
**Category**: Composing Methods â†’ functions

## Rule Description
Extract Function: Move a fragment of code into its own function.

## Before
```python
def process_invoice(invoice):
    outstanding = 0
    for order in invoice['orders']:
        outstanding += order['amount']
    print(f"amount: {outstanding}")
```

## After  
```python
def process_invoice(invoice):
    outstanding = calculate_outstanding(invoice)
    print(f"amount: {outstanding}")

def calculate_outstanding(invoice):
    return sum(order['amount'] for order in invoice['orders'])
```

## Full Example
```python
# Demonstration of Extract Function before refactoring
def process_invoice(invoice):
    outstanding = 0
    for order in invoice['orders']:
        outstanding += order['amount']
    print(f"amount: {outstanding}")
```
