# Use recursion to express a problem's inherent recursive structure rather than manual bookkeeping loops.

**ID**: SICP003  
**Category**: Procedural Abstraction (Recursion mirrors problem) â†’ functions

## Rule Description
Use recursion to express a problem's inherent recursive structure rather than manual bookkeeping loops.

## Before
```python
def depth(tree):
    if not isinstance(tree, list):
        return 0
    max_d = 0
    stack = [(tree, 1)]
    while stack:
        node, d = stack.pop()
        max_d = max(max_d, d)
        for child in node:
            if isinstance(child, list):
                stack.append((child, d + 1))
    return max_d
```

## After  
```python
def depth(tree):
    if not isinstance(tree, list):
        return 0
    return 1 + max((depth(child) for child in tree if isinstance(child, list)), default=0)
```

## Full Example
```python
tree = [1, [2, [3, 4], 5], 6]
print(depth(tree))  # -> 3
```
